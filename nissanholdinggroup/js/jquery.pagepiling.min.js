!function(a,b,c,d){"use strict";a.fn.pagepiling=function(e){function f(a){a.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function g(b){var c=a(".pp-section.active").index(".pp-section"),d=b.index(".pp-section");return c>d?"up":"down"}function h(b,c){var d={destination:b,animated:c,activeSection:a(".pp-section.active"),anchorLink:b.data("anchor"),sectionIndex:b.index(".pp-section"),toMove:b,yMovement:g(b),leavingSection:a(".pp-section.active").index(".pp-section")+1};if(!d.activeSection.is(b)){"undefined"==typeof d.animated&&(d.animated=!0),"undefined"!=typeof d.anchorLink&&n(d.anchorLink,d.sectionIndex),d.destination.addClass("active").siblings().removeClass("active"),d.sectionsToMove=k(d),"down"===d.yMovement?(d.translate3d=N(),d.scrolling="-100%",Z.css3||d.sectionsToMove.each(function(b){b!=d.activeSection.index(".pp-section")&&a(this).css(m(d.scrolling))}),d.animateSection=d.activeSection):(d.translate3d="translate3d(0px, 0px, 0px)",d.scrolling="0",d.animateSection=b),a.isFunction(Z.onLeave)&&Z.onLeave.call(this,d.leavingSection,d.sectionIndex+1,d.yMovement),i(d),L(d.anchorLink),K(d.anchorLink,d.sectionIndex),O=d.anchorLink;var e=(new Date).getTime();R=e}}function i(b){Z.css3?(t(b.animateSection,b.translate3d,b.animated),b.sectionsToMove.each(function(){t(a(this),b.translate3d,b.animated)}),setTimeout(function(){j(b)},Z.scrollingSpeed)):(b.scrollOptions=m(b.scrolling),b.animated?b.animateSection.animate(b.scrollOptions,Z.scrollingSpeed,Z.easing,function(){l(b),j(b)}):(b.animateSection.css(m(b.scrolling)),setTimeout(function(){l(b),j(b)},400)))}function j(b){a.isFunction(Z.afterLoad)&&Z.afterLoad.call(this,b.anchorLink,b.sectionIndex+1),2==b.sectionIndex}function k(b){var c;return c="down"===b.yMovement?a(".pp-section").map(function(c){if(c<b.destination.index(".pp-section"))return a(this)}):a(".pp-section").map(function(c){if(c>b.destination.index(".pp-section"))return a(this)})}function l(b){"up"===b.yMovement&&b.sectionsToMove.each(function(c){a(this).css(m(b.scrolling))})}function m(a){return"vertical"===Z.direction?{top:a}:{left:a}}function n(a,b){Z.anchors.length?(location.hash=a,o(location.hash)):o(String(b))}function o(b){b=b.replace("#",""),a("body")[0].className=a("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),a("body").addClass("pp-viewing-"+b)}function p(){var d=c.location.hash.replace("#",""),e=d,f=a(b).find('.pp-section[data-anchor="'+e+'"]');f.length>0&&h(f,Z.animateAnchor)}function q(){var a=(new Date).getTime();return a-R<Y+Z.scrollingSpeed}function r(){var d=c.location.hash.replace("#","").split("/"),e=d[0];if(e.length&&e&&e!==O){var f;f=isNaN(e)?a(b).find('[data-anchor="'+e+'"]'):a(".pp-section").eq(e-1),h(f)}}function s(a){return{"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,transform:a}}function t(a,b,c){a.toggleClass("pp-easing",c),a.css(s(b))}function u(b){var d=(new Date).getTime();b=b||c.event;var e=b.wheelDelta||-b.deltaY||-b.detail,f=Math.max(-1,Math.min(1,e)),g="undefined"!=typeof b.wheelDeltaX||"undefined"!=typeof b.deltaX,h=Math.abs(b.wheelDeltaX)<Math.abs(b.wheelDelta)||Math.abs(b.deltaX)<Math.abs(b.deltaY)||!g;X.length>149&&X.shift(),X.push(Math.abs(e));var i=d-_;if(_=d,i>200&&(X=[]),!q()){var j=a(".pp-section.active"),k=y(j),l=v(X,10),m=v(X,70),n=l>=m;return n&&h&&(f<0?w("down",k):f>0&&w("up",k)),!1}}function v(a,b){for(var c=0,d=a.slice(Math.max(a.length-b,1)),e=0;e<d.length;e++)c+=d[e];return Math.ceil(c/b)}function w(a,b){var c,d;if("down"==a?(c="bottom",d=P.moveSectionDown):(c="top",d=P.moveSectionUp),b.length>0){if(!x(c,b))return!0;d()}else d()}function x(a,b){return"top"===a?!b.scrollTop():"bottom"===a?b.scrollTop()+1+b.innerHeight()>=b[0].scrollHeight:void 0}function y(a){return a.filter(".pp-scrollable")}function z(){Q.get(0).addEventListener?(Q.get(0).removeEventListener("mousewheel",u,!1),Q.get(0).removeEventListener("wheel",u,!1)):Q.get(0).detachEvent("onmousewheel",u)}function A(){Q.get(0).addEventListener?(Q.get(0).addEventListener("mousewheel",u,!1),Q.get(0).addEventListener("wheel",u,!1)):Q.get(0).attachEvent("onmousewheel",u)}function B(){if(S){var a=D();Q.off("touchstart "+a.down).on("touchstart "+a.down,G),Q.off("touchmove "+a.move).on("touchmove "+a.move,H)}}function C(){if(S){var a=D();Q.off("touchstart "+a.down),Q.off("touchmove "+a.move)}}function D(){var a;return a=c.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function E(a){var b=new Array;return b.y="undefined"!=typeof a.pageY&&(a.pageY||a.pageX)?a.pageY:a.touches[0].pageY,b.x="undefined"!=typeof a.pageX&&(a.pageY||a.pageX)?a.pageX:a.touches[0].pageX,b}function F(a){return"undefined"==typeof a.pointerType||"mouse"!=a.pointerType}function G(a){var b=a.originalEvent;if(F(b)){var c=E(b);T=c.y,U=c.x}}function H(b){var c=b.originalEvent;if(!I(b.target)&&F(c)){var d=a(".pp-section.active"),e=y(d);if(e.length||b.preventDefault(),!q()){var f=E(c);V=f.y,W=f.x,"horizontal"===Z.direction&&Math.abs(U-W)>Math.abs(T-V)?Math.abs(U-W)>Q.width()/100*Z.touchSensitivity&&(U>W?w("down",e):W>U&&w("up",e)):Math.abs(T-V)>Q.height()/100*Z.touchSensitivity&&(T>V?w("down",e):V>T&&w("up",e))}}}function I(b,c){c=c||0;var d=a(b).parent();return!!(c<Z.normalScrollElementTouchThreshold&&d.is(Z.normalScrollElements))||c!=Z.normalScrollElementTouchThreshold&&I(d,++c)}function J(){a("body").append('<div id="pp-nav"><ul></ul></div>');var b=a("#pp-nav");b.css("color",Z.navigation.textColor),b.addClass(Z.navigation.position);for(var c=0;c<a(".pp-section").length;c++){var d="";if(Z.anchors.length&&(d=Z.anchors[c]),"undefined"!==Z.navigation.tooltips){var e=Z.navigation.tooltips[c];"undefined"==typeof e&&(e="")}b.find("ul").append('<li data-tooltip="'+e+'"><a href="#'+d+'"><span></span></a></li>')}b.find("span").css("border-color",Z.navigation.bulletsColor)}function K(b,c){Z.navigation&&(a("#pp-nav").find(".active").removeClass("active"),b?a("#pp-nav").find('a[href="#'+b+'"]').addClass("active"):a("#pp-nav").find("li").eq(c).find("a").addClass("active"))}function L(b){Z.menu&&(a(Z.menu).find(".active").removeClass("active"),a(Z.menu).find('[data-menuanchor="'+b+'"]').addClass("active"))}function M(){var a,e=b.createElement("p"),f={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};b.body.insertBefore(e,null);for(var g in f)e.style[g]!==d&&(e.style[g]="translate3d(1px,1px,1px)",a=c.getComputedStyle(e).getPropertyValue(f[g]));return b.body.removeChild(e),a!==d&&a.length>0&&"none"!==a}function N(){return"vertical"!==Z.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}var O,P=a.fn.pagepiling,Q=a(this),R=0,S="ontouchstart"in c||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,T=0,U=0,V=0,W=0,X=[],Y=600,Z=a.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},e);a.extend(a.easing,{easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c}}),P.setScrollingSpeed=function(a){Z.scrollingSpeed=a},P.setMouseWheelScrolling=function(a){a?A():z()},P.setAllowScrolling=function(a){a?(P.setMouseWheelScrolling(!0),B()):(P.setMouseWheelScrolling(!1),C())},P.setKeyboardScrolling=function(a){Z.keyboardScrolling=a},P.moveSectionUp=function(){var b=a(".pp-section.active").prev(".pp-section");!b.length&&Z.loopTop&&(b=a(".pp-section").last()),b.length&&h(b)},P.moveSectionDown=function(){var b=a(".pp-section.active").next(".pp-section");!b.length&&Z.loopBottom&&(b=a(".pp-section").first()),b.length&&h(b)},P.moveTo=function(c){var d="";d=isNaN(c)?a(b).find('[data-anchor="'+c+'"]'):a(".pp-section").eq(c-1),d.length>0&&h(d)},a(Z.sectionSelector).each(function(){a(this).addClass("pp-section")}),Z.css3&&(Z.css3=M()),a(Q).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),P.setAllowScrolling(!0),a.isEmptyObject(Z.navigation)||J();var $=a(".pp-section").length;a(".pp-section").each(function(b){a(this).data("data-index",b),a(this).css("z-index",$),a(".to-tab").on("click",function(){var b=a(this).data("href");a(".tab-block").removeClass("is-active"),a(".tab-block#"+b).addClass("is-active"),a(".scroll").perfectScrollbar("update"),P.moveTo(3),a(".tab").removeClass("is-active"),a(".tab[data-href='"+b+"'").addClass("is-active")}),b||0!==a(".pp-section.active").length||a(this).addClass("active"),"undefined"!=typeof Z.anchors[b]&&a(this).attr("data-anchor",Z.anchors[b]),"undefined"!=typeof Z.sectionsColor[b]&&a(this).css("background-color",Z.sectionsColor[b]),Z.verticalCentered&&!a(this).hasClass("pp-scrollable")&&f(a(this)),$-=1}).promise().done(function(){Z.navigation&&(a("#pp-nav").css("margin-top","-"+a("#pp-nav").height()/2+"px"),a("#pp-nav").find("li").eq(a(".pp-section.active").index(".pp-section")).find("a").addClass("active")),a(c).on("load",function(){p()}),a.isFunction(Z.afterRender)&&Z.afterRender.call(this)}),a(c).on("hashchange",r),Z.normalScrollElements&&(a(b).on("mouseenter",Z.normalScrollElements,function(){P.setMouseWheelScrolling(!1)}),a(b).on("mouseleave",Z.normalScrollElements,function(){P.setMouseWheelScrolling(!0)}));var _=(new Date).getTime();a(b).on("touchmove",function(){B()}),a(".map-block").on("touchmove",function(){C()}),a(b).on("click touchstart","#pp-nav a",function(b){b.preventDefault();var c=a(this).parent().index();h(a(".pp-section").eq(c))}),a(b).on({mouseenter:function(){var b=a(this).data("tooltip");a('<div class="pp-tooltip '+Z.navigation.position+'">'+b+"</div>").hide().appendTo(a(this)).fadeIn(200)},mouseleave:function(){a(this).find(".pp-tooltip").fadeOut(200,function(){a(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);